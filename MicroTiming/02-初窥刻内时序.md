# #02刻内时序

## 2.1刻内时序的观测

## 2.2游戏阶段理论

在前文中我们知道，MC执行任何东西总是有优先顺序的，我们通过源码，实验等途径发现MC在执行1gt时总是按照以下顺序执行固定的事件：

1. World Tick Update，简称WTU，中文译作世界时间更新。游戏内存在一个和世界绑定的计时器，在世界创建时被初始化为0。在本游戏阶段内，该计时器自增1。我们称第n刻，为包含使得世界计时器增加到n的那个世界事件更新计划的刻。
2. Schedule Tick/Tile Tick/Next Tick Entry*，简称TT/NTE*，中文译作计划刻。（在此处提及NTE和Next Tick Entry的**错误**译名旨在帮助各位读者看懂部分早期的其他文档，不希望各位继续使用这两个名字。）
3. Chunk Tick，简称CT，中文译作区块刻。在此阶段内，当在存在玩家在一定距离内时，会发生作物生长、草方块蔓延、水结冰等事件。在每个区块刻阶段，游戏遍历玩家附近的所有区块，然后在这些区块里面随机选取方块，执行这些事件。
4. Block Event，简称BE，中文译作方块事件。最重要的在方块事件阶段运作的元件是活塞。当活塞发现自己的实际状态和供能状态不符的时候，会添加一个方块事件。在某个方块事件之外添加的方块事件，会等到下一个方块事件阶段执行；在方块事件阶段内添加的方块事件，会在本个方块事件阶段执行。
5. Entity Update，简称EU，中文译作实体运算。实体需要每刻都主动进行运动、实体 AI 等行为。所有的实体行为，比如生物运动、TNT 爆炸、怪物攻击，都发生在这个阶段。非玩家踩下压力板、绊线使得它们产生红石信号，也发生在这个阶段。
6. Block/Tile Entity，简称TE，中文译作方块实体。有部分方块需要每刻运行自己相关的逻辑，这些事情发生在方块实体阶段。漏斗会在方块实体阶段吸取物品、传输物品；被活塞推动的方块，会变成移动中的方块（b36），它们会在自己创建后的前两次方块实体阶段进行推动实体的逻辑，并且在第三次方块实体阶段变回普通的方块。
7. Async Task，简称AT，中文译作异步事件。也可称为Player Action/玩家操作。玩家操作实际上是从客户端发往服务端的网络数据包。在每一刻的结尾，服务端会统一执行所有在这一刻内收到的
玩家操作数据包。（有的时候也会被叫NU就是了，Network Update）

以上为主要游戏阶段，后文中我们也会围绕这些事件展开叙述。

## 2.3瞬时

我们称一个元件的某种行为是瞬时的，当且仅当该行为一旦被触发就立即计算，中间无法插入任何操作。瞬时的行为可以在任意阶段执行，它发生的阶段是触发它的事件发生的阶段。

> 比如说，红石粉亮灭是瞬时的，如果玩家关闭了一个拉杆，那么可以导致红石粉在玩家操作阶段熄灭，但是如果活塞推走了一个红石块，就可以导致红石粉在方块事件阶段熄灭。

## 2.4常见元件的运行阶段
